<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RentAI - ƒêƒÉng nh·∫≠p & ƒê·ªãnh Gi√° Th√¥ng Minh</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        :root {
            --primary: #2563eb; --primary-dark: #1d4ed8; --secondary: #10b981; --accent: #f59e0b;
            --danger: #ef4444; --dark: #1f2937; --light: #f8fafc; --gray: #6b7280; --gray-light: #e5e7eb;
        }
        body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }

        /* ===== Header ===== */
        .header { display: flex; justify-content: space-between; align-items: center; background: #fff; padding: 15px 25px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,.1); margin-bottom: 25px; }
        .logo { display: flex; align-items: center; gap: 10px; font-size: 24px; font-weight: 700; color: var(--primary); }
        .logo i { font-size: 28px; }
        .user-info { display: flex; align-items: center; gap: 15px; }
        .user-avatar { width: 45px; height: 45px; border-radius: 50%; background: var(--primary); color: #fff; display: flex; align-items: center; justify-content: center; font-weight: 700; }
        .xp-badge { background: var(--accent); color: #fff; padding: 5px 12px; border-radius: 20px; font-size: 14px; font-weight: 600; }

        /* ===== Layout ===== */
        .dashboard { display: grid; grid-template-columns: 1fr 350px; gap: 25px; }
        .card { background: #fff; border-radius: 15px; padding: 25px; box-shadow: 0 10px 25px rgba(0,0,0,.1); margin-bottom: 25px; }
        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .card-title { font-size: 20px; font-weight: 700; color: var(--dark); }
        .card-subtitle { font-size: 14px; color: var(--gray); margin-bottom: 15px; }

        /* ===== Challenge Card ===== */
        .challenge-card { background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%); color: #fff; border-radius: 15px; padding: 25px; margin-bottom: 25px; position: relative; overflow: hidden; }
        .challenge-card::before { content: ""; position: absolute; top: -50%; right: -50%; width: 100%; height: 100%; background: rgba(255,255,255,.1); transform: rotate(30deg); }
        .challenge-title { font-size: 22px; font-weight: 700; margin-bottom: 10px; }
        .challenge-desc { font-size: 15px; margin-bottom: 20px; opacity: .9; }

        /* ===== Buttons ===== */
        .btn { padding: 12px 25px; border-radius: 10px; border: none; font-weight: 600; cursor: pointer; transition: all .3s ease; display: inline-flex; align-items: center; gap: 8px; }
        .btn-primary { background: var(--primary); color: #fff; }
        .btn-primary:hover { background: var(--primary-dark); transform: translateY(-2px); }
        .btn-secondary { background: var(--secondary); color: #fff; }
        .btn-secondary:hover { background: #0da271; transform: translateY(-2px); }
        .btn-accent { background: var(--accent); color: #fff; }
        .btn-accent:hover { background: #e59409; transform: translateY(-2px); }
        .btn-outline { background: transparent; border: 2px solid var(--primary); color: var(--primary); }
        .btn-outline:hover { background: var(--primary); color: #fff; }
        .btn-ghost { background: transparent; border: 2px solid var(--gray-light); color: var(--dark); }
        .btn-ghost:hover { border-color: var(--primary); color: var(--primary); }

        /* ===== Prediction Card ===== */
        .prediction-card { border-left: 5px solid var(--secondary); }
        .prediction-trend { display: flex; align-items: center; gap: 10px; margin-bottom: 15px; }
        .trend-up { color: var(--secondary); font-weight: 700; }
        .trend-icon { font-size: 24px; }

        /* ===== Community ===== */
        .community-stats { display: flex; gap: 15px; margin-bottom: 20px; }
        .stat-item { flex: 1; text-align: center; padding: 15px; background: var(--light); border-radius: 10px; }
        .stat-value { font-size: 24px; font-weight: 700; color: var(--primary); }
        .stat-label { font-size: 14px; color: var(--gray); }

        /* ===== Modes ===== */
        .pricing-modes { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 20px; }
        .mode-card { padding: 20px; border-radius: 10px; border: 2px solid var(--gray-light); transition: all .3s ease; cursor: pointer; }
        .mode-card:hover { border-color: var(--primary); transform: translateY(-5px); }
        .mode-card.active { border-color: var(--primary); background: rgba(37,99,235,.05); }
        .mode-icon { font-size: 24px; margin-bottom: 10px; color: var(--primary); }
        .mode-title { font-weight: 700; margin-bottom: 5px; }
        .mode-desc { font-size: 13px; color: var(--gray); }

        /* ===== Form ===== */
        .form-group { margin-bottom: 20px; }
        .form-label { display: block; margin-bottom: 8px; font-weight: 600; color: var(--dark); }
        .form-input { width: 100%; padding: 12px 15px; border: 2px solid var(--gray-light); border-radius: 10px; font-size: 16px; transition: all .3s ease; }
        .form-input:focus { border-color: var(--primary); outline: none; }
        .amenities-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 10px; }
        .amenity-item { display: flex; align-items: center; gap: 8px; }

        /* ===== Results ===== */
        .results-section { display: none; }
        .price-result { text-align: center; padding: 30px; background: linear-gradient(135deg, var(--secondary) 0%, #0da271 100%); color: #fff; border-radius: 15px; margin-bottom: 25px; }
        .price-value { font-size: 42px; font-weight: 800; margin: 10px 0; }
        .confidence-badge { display: inline-block; background: rgba(255,255,255,.2); padding: 5px 15px; border-radius: 20px; font-size: 14px; margin-bottom: 15px; }
        .price-range { font-size: 18px; opacity: .9; }

        /* ===== AI Chat Section ===== */
        .ai-chat-section { margin-top: 30px; border-top: 1px solid var(--gray-light); padding-top: 20px; }
        .ai-chat-header { display: flex; align-items: center; gap: 10px; margin-bottom: 15px; }
        .ai-chat-title { font-size: 18px; font-weight: 700; color: var(--dark); }
        .ai-chat-subtitle { font-size: 14px; color: var(--gray); margin-bottom: 15px; }
        .chat-container { border: 2px solid var(--gray-light); border-radius: 12px; overflow: hidden; background: var(--light); }
        .chat-messages { height: 200px; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 12px; }
        .message { max-width: 80%; padding: 10px 15px; border-radius: 12px; line-height: 1.4; }
        .message.user { align-self: flex-end; background: var(--primary); color: white; border-bottom-right-radius: 4px; }
        .message.ai { align-self: flex-start; background: white; border: 1px solid var(--gray-light); border-bottom-left-radius: 4px; }
        .chat-input-container { display: flex; border-top: 1px solid var(--gray-light); background: white; }
        .chat-input { flex: 1; padding: 15px; border: none; outline: none; font-size: 15px; resize: none; min-height: 60px; max-height: 120px; }
        .chat-send-btn { background: var(--primary); color: white; border: none; padding: 0 20px; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; justify-content: center; }
        .chat-send-btn:hover { background: var(--primary-dark); }
        .chat-send-btn:disabled { background: var(--gray); cursor: not-allowed; }
        .suggestion-tags { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px; }
        .suggestion-tag { background: rgba(37, 99, 235, 0.1); color: var(--primary); padding: 6px 12px; border-radius: 20px; font-size: 13px; cursor: pointer; transition: all 0.2s; }
        .suggestion-tag:hover { background: rgba(37, 99, 235, 0.2); }
        .sidebar .card:last-child {
    display: none !important;
    /* ·∫®n card d·ª± ƒëo√°n th·ªã tr∆∞·ªùng */
.prediction-card { display: none !important; }
/* ·∫®n card Tr·ª£ L√Ω AI (card th·ª© 3 trong sidebar) */
.sidebar > .card:nth-of-type(3) { display: none !important; }


/* ·∫®n ho√†n to√†n khung tr√≤ chuy·ªán AI */
.card.ai-chat-section,
.ai-chat-section,
#chatMessages,
#promptInput {
    display: none !important;
    visibility: hidden !important;
    height: 0 !important;
    padding: 0 !important;
    margin: 0 !important;
    overflow: hidden !important;
}


}

        /* ===== AI FAB ===== */
        .ai-assistant { position: fixed; bottom: 30px; right: 30px; width: 60px; height: 60px; background: var(--primary); color: #fff; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; box-shadow: 0 5px 15px rgba(0,0,0,.2); cursor: pointer; z-index: 100; transition: all .3s ease; }
        .ai-assistant:hover { transform: scale(1.1); }
        .prediction-card {
    display: none !important;
}



        /* ===== Auth Screen ===== */
        .auth-screen { position: fixed; inset: 0; z-index: 200; display: grid; place-items: center; padding: 24px; backdrop-filter: blur(2px); }
        .auth-bg { position: absolute; inset: 0; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); opacity: 0.95; }
        .auth-card { position: relative; width: 100%; max-width: 440px; background: #fff; border-radius: 18px; box-shadow: 0 20px 50px rgba(0,0,0,.2); padding: 28px; overflow: hidden; }
        .auth-card::before { content: ""; position: absolute; width: 200px; height: 200px; right: -80px; top: -80px; background: rgba(37,99,235,.08); border-radius: 50%; }
        .auth-header { display: flex; align-items: center; gap: 10px; margin-bottom: 14px; color: var(--primary); font-weight: 800; font-size: 20px; }
        .auth-title { font-size: 22px; font-weight: 800; color: var(--dark); margin-bottom: 6px; }
        .auth-subtitle { font-size: 14px; color: var(--gray); margin-bottom: 18px; }
        .auth-row { display: grid; gap: 12px; margin: 14px 0; }
        .input-wrap { position: relative; }
        .input-wrap i { position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--gray); }
        .input { width: 100%; padding: 12px 44px; border: 2px solid var(--gray-light); border-radius: 12px; font-size: 15px; transition: .2s; }
        .input:focus { border-color: var(--primary); outline: none; box-shadow: 0 0 0 3px rgba(37,99,235,.08); }
        .toggle-pass { position: absolute; right: 12px; top: 50%; transform: translateY(-50%); cursor: pointer; color: var(--gray); }
        .auth-actions { display: flex; justify-content: space-between; align-items: center; margin: 8px 0 16px; font-size: 14px; }
        .auth-links { display: flex; gap: 14px; align-items: center; }
        .auth-foot { display: grid; gap: 10px; }
        .auth-note { font-size: 12px; color: var(--gray); text-align: center; }
        .error-text { color: var(--danger); font-size: 13px; display: none; margin-top: -4px; }
        .divider { display: grid; grid-template-columns: 1fr auto 1fr; align-items: center; gap: 10px; color: var(--gray); font-size: 12px; margin: 6px 0; }
        .divider::before, .divider::after { content: ""; height: 1px; background: var(--gray-light); }

        /* ===== Register Screen ===== */
        .register-screen { position: fixed; inset: 0; z-index: 200; display: none; place-items: center; padding: 24px; backdrop-filter: blur(2px); }
        .register-card { position: relative; width: 100%; max-width: 480px; background: #fff; border-radius: 18px; box-shadow: 0 20px 50px rgba(0,0,0,.2); padding: 28px; overflow: hidden; }
        .register-card::before { content: ""; position: absolute; width: 200px; height: 200px; left: -80px; bottom: -80px; background: rgba(16,185,129,.08); border-radius: 50%; }
        .progress-steps { display: flex; justify-content: space-between; margin-bottom: 25px; position: relative; }
        .progress-steps::before { content: ""; position: absolute; top: 50%; left: 0; right: 0; height: 2px; background: var(--gray-light); transform: translateY(-50%); z-index: 1; }
        .step { width: 32px; height: 32px; border-radius: 50%; background: var(--gray-light); display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 600; color: var(--gray); position: relative; z-index: 2; transition: all .3s ease; }
        .step.active { background: var(--primary); color: #fff; }
        .step.completed { background: var(--secondary); color: #fff; }
        .step-label { position: absolute; top: 100%; left: 50%; transform: translateX(-50%); margin-top: 8px; font-size: 12px; color: var(--gray); white-space: nowrap; }
        .step.active .step-label { color: var(--primary); font-weight: 600; }
        .step.completed .step-label { color: var(--secondary); }

        .form-step { display: none; }
        .form-step.active { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .step-actions { display: flex; justify-content: space-between; margin-top: 25px; gap: 12px; }
        .step-actions .btn { flex: 1; }

        .user-type-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-top: 15px; }
        .user-type-card { border: 2px solid var(--gray-light); border-radius: 12px; padding: 20px; text-align: center; cursor: pointer; transition: all .3s ease; }
        .user-type-card:hover { border-color: var(--primary); transform: translateY(-2px); }
        .user-type-card.selected { border-color: var(--primary); background: rgba(37,99,235,.05); }
        .user-type-icon { font-size: 32px; margin-bottom: 10px; color: var(--primary); }
        .user-type-title { font-weight: 600; margin-bottom: 5px; }
        .user-type-desc { font-size: 12px; color: var(--gray); }

        .terms-check { display: flex; align-items: flex-start; gap: 10px; margin: 15px 0; }
        .terms-check input { margin-top: 2px; }
        .terms-text { font-size: 13px; color: var(--gray); }
        .terms-text a { color: var(--primary); text-decoration: none; }
        .terms-text a:hover { text-decoration: underline; }

        .success-screen { text-align: center; padding: 30px 0; }
        .success-icon { font-size: 64px; color: var(--secondary); margin-bottom: 20px; }
        .success-title { font-size: 24px; font-weight: 700; color: var(--dark); margin-bottom: 10px; }
        .success-message { color: var(--gray); margin-bottom: 25px; line-height: 1.5; }

        @media (max-width: 768px) {
            .dashboard { grid-template-columns: 1fr; }
            .pricing-modes { grid-template-columns: 1fr; }
            .amenities-grid { grid-template-columns: repeat(2, 1fr); }
            .user-type-grid { grid-template-columns: 1fr; }
            .step-label { font-size: 10px; }
            .message { max-width: 90%; }
        }
/* ·∫®n ho√†n to√†n khung tr√≤ chuy·ªán AI */
.card.ai-chat-section,
.ai-chat-section,
#chatMessages,
#promptInput {
    display: none !important;
    visibility: hidden !important;
    height: 0 !important;
    padding: 0 !important;
    margin: 0 !important;
    overflow: hidden !important;
}




    </style>
</head>
<body>
    <!-- ===== Register Screen ===== -->
    <div id="registerScreen" class="register-screen" aria-modal="true" role="dialog">
        <div class="auth-bg" aria-hidden="true"></div>
        <div class="register-card" role="document">
            <div class="auth-header"><i class="fas fa-robot"></i><span>RentAI</span></div>
            <div class="auth-title">T·∫°o t√†i kho·∫£n m·ªõi</div>
            <div class="auth-subtitle">Tham gia c·ªông ƒë·ªìng ƒë·ªãnh gi√° th√¥ng minh</div>

            <!-- Progress Steps -->
            <div class="progress-steps">
                <div class="step active" id="step1">
                    <span>1</span>
                    <div class="step-label">Th√¥ng tin</div>
                </div>
                <div class="step" id="step2">
                    <span>2</span>
                    <div class="step-label">Lo·∫°i t√†i kho·∫£n</div>
                </div>
                <div class="step" id="step3">
                    <span>3</span>
                    <div class="step-label">X√°c nh·∫≠n</div>
                </div>
            </div>

            <!-- Step 1: Basic Information -->
            <form id="registerForm" class="form-step active" data-step="1" novalidate>
                <div class="auth-row">
                    <label class="form-label" for="fullName">H·ªç v√† t√™n</label>
                    <div class="input-wrap">
                        <i class="fas fa-user"></i>
                        <input id="fullName" type="text" class="input" placeholder="Nh·∫≠p h·ªç v√† t√™n" required />
                    </div>
                    <small id="nameErr" class="error-text">Vui l√≤ng nh·∫≠p h·ªç t√™n</small>
                </div>

                <!-- üëá S·ªë ƒëi·ªán tho·∫°i (b·∫Øt bu·ªôc) ‚Äî ƒë·∫∑t tr∆∞·ªõc Email -->
                <div class="auth-row">
                    <label class="form-label" for="phone">S·ªë ƒëi·ªán tho·∫°i</label>
                    <div class="input-wrap">
                        <i class="fas fa-phone"></i>
                        <input
                            id="phone"
                            type="tel"
                            class="input"
                            placeholder="V√≠ d·ª•: 0987654321"
                            inputmode="numeric"
                            pattern="[0-9]{10}"
                            maxlength="10"
                            title="S·ªë ƒëi·ªán tho·∫°i ph·∫£i g·ªìm ƒë√∫ng 10 ch·ªØ s·ªë"
                            aria-describedby="phoneErr"
                            required
                        />
                    </div>
                    <small id="phoneErr" class="error-text">Vui l√≤ng nh·∫≠p ƒë√∫ng 10 ch·ªØ s·ªë.</small>
                </div>

                <div class="auth-row">
                    <label class="form-label" for="regEmail">Email</label>
                    <div class="input-wrap">
                        <i class="fas fa-envelope"></i>
                        <input id="regEmail" type="email" class="input" placeholder="V√≠ d·ª•: demo@basao.ai" required />
                    </div>
                    <small id="regEmailErr" class="error-text">Email kh√¥ng h·ª£p l·ªá</small>
                </div>

                <div class="auth-row">
                    <label class="form-label" for="regPassword">M·∫≠t kh·∫©u</label>
                    <div class="input-wrap">
                        <i class="fas fa-lock"></i>
                        <input id="regPassword" type="password" class="input" placeholder="√çt nh·∫•t 6 k√Ω t·ª±" required />
                        <i id="toggleRegPass" class="fas fa-eye toggle-pass"></i>
                    </div>
                    <small id="regPassErr" class="error-text">M·∫≠t kh·∫©u c·∫ßn √≠t nh·∫•t 6 k√Ω t·ª±</small>
                </div>

                <div class="auth-row">
                    <label class="form-label" for="confirmPassword">X√°c nh·∫≠n m·∫≠t kh·∫©u</label>
                    <div class="input-wrap">
                        <i class="fas fa-lock"></i>
                        <input id="confirmPassword" type="password" class="input" placeholder="Nh·∫≠p l·∫°i m·∫≠t kh·∫©u" required />
                    </div>
                    <small id="confirmPassErr" class="error-text">M·∫≠t kh·∫©u kh√¥ng kh·ªõp</small>
                </div>

                <div class="step-actions">
                    <button type="button" class="btn btn-ghost" id="backToLogin">
                        <i class="fas fa-arrow-left"></i> Quay l·∫°i
                    </button>
                    <button type="button" class="btn btn-primary" id="nextToStep2">
                        Ti·∫øp t·ª•c <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </form>

            <!-- Step 2: Account Type -->
            <div class="form-step" id="step2Form" data-step="2">
                <div class="auth-row">
                    <label class="form-label">B·∫°n l√† ai?</label>
                    <div class="user-type-grid">
                        <div class="user-type-card" data-type="owner">
                            <div class="user-type-icon"><i class="fas fa-home"></i></div>
                            <div class="user-type-title">Ch·ªß nh√†</div>
                            <div class="user-type-desc">Cho thu√™ & ƒê·ªãnh gi√° t√†i s·∫£n</div>
                        </div>
                        <div class="user-type-card" data-type="agent">
                            <div class="user-type-icon"><i class="fas fa-user-tie"></i></div>
                            <div class="user-type-title">M√¥i gi·ªõi</div>
                            <div class="user-type-desc">Qu·∫£n l√Ω nhi·ªÅu BƒêS</div>
                        </div>
                        <div class="user-type-card" data-type="investor">
                            <div class="user-type-icon"><i class="fas fa-chart-line"></i></div>
                            <div class="user-type-title">Nh√† ƒë·∫ßu t∆∞</div>
                            <div class="user-type-desc">Ph√¢n t√≠ch & ƒê·∫ßu t∆∞</div>
                        </div>
                        <div class="user-type-card" data-type="renter">
                            <div class="user-type-icon"><i class="fas fa-search"></i></div>
                            <div class="user-type-title">Ng∆∞·ªùi thu√™</div>
                            <div class="user-type-desc">T√¨m ki·∫øm & So s√°nh</div>
                        </div>
                    </div>
                    <small id="typeErr" class="error-text">Vui l√≤ng ch·ªçn lo·∫°i t√†i kho·∫£n</small>
                </div>

                <div class="step-actions">
                    <button type="button" class="btn btn-ghost" id="backToStep1">
                        <i class="fas fa-arrow-left"></i> Quay l·∫°i
                    </button>
                    <button type="button" class="btn btn-primary" id="nextToStep3">
                        Ti·∫øp t·ª•c <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Step 3: Confirmation -->
            <div class="form-step" id="step3Form" data-step="3">
                <!-- ƒê√É B·ªé S·ªê ƒêI·ªÜN THO·∫†I ·ªû ƒê√ÇY -->

                <div class="auth-row">
                    <label class="form-label" for="referral">M√£ x√°c nh·∫≠n </label>
                    <div class="input-wrap">
                        <i class="fas fa-lock"></i>
                        <input id="referral" type="text" class="input" placeholder="Nh·∫≠p m√£ ƒë∆∞·ª£c g·ª≠i v·ªÅ email" />
                    </div>

                    <label class="form-label" for="referral">M√£ gi·ªõi thi·ªáu (tu·ª≥ ch·ªçn)</label>
                    <div class="input-wrap">
                        <i class="fas fa-gift"></i>
                        <input id="referral" type="text" class="input" placeholder="Nh·∫≠p m√£ n·∫øu c√≥" />
                    </div>
                </div>

                <div class="terms-check">
                    <input type="checkbox" id="acceptTerms" required />
                    <label for="acceptTerms" class="terms-text">
                        T√¥i ƒë·ªìng √Ω v·ªõi <a href="#">ƒêi·ªÅu kho·∫£n d·ªãch v·ª•</a> v√† <a href="#">Ch√≠nh s√°ch b·∫£o m·∫≠t</a> c·ªßa RentAI
                    </label>
                </div>
                <small id="termsErr" class="error-text">Vui l√≤ng ch·∫•p nh·∫≠n ƒëi·ªÅu kho·∫£n</small>

                <div class="step-actions">
                    <button type="button" class="btn btn-ghost" id="backToStep2">
                        <i class="fas fa-arrow-left"></i> Quay l·∫°i
                    </button>
                    <button type="button" class="btn btn-primary" id="submitRegister">
                        <i class="fas fa-check"></i> Ho√†n t·∫•t ƒëƒÉng k√Ω
                    </button>
                </div>
            </div>

            <!-- Success Screen -->
            <div class="form-step" id="successStep" data-step="4">
                <div class="success-screen">
                    <div class="success-icon"><i class="fas fa-check-circle"></i></div>
                    <div class="success-title">ƒêƒÉng k√Ω th√†nh c√¥ng!</div>
                    <div class="success-message">
                        T√†i kho·∫£n c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c t·∫°o. Vui l√≤ng ki·ªÉm tra email ƒë·ªÉ x√°c th·ª±c t√†i kho·∫£n 
                        v√† b·∫Øt ƒë·∫ßu s·ª≠ d·ª•ng c√°c t√≠nh nƒÉng th√¥ng minh c·ªßa RentAI.
                    </div>
                    <button class="btn btn-primary" id="goToLogin">
                        <i class="fas fa-right-to-bracket"></i> ƒêƒÉng nh·∫≠p ngay
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ===== Auth Screen ===== -->
    <div id="authScreen" class="auth-screen" aria-modal="true" role="dialog">
        <div class="auth-bg" aria-hidden="true"></div>
        <div class="auth-card" role="document">
            <div class="auth-header"><i class="fas fa-robot"></i><span>RentAI</span></div>
            <div class="auth-title">ƒêƒÉng nh·∫≠p ƒë·ªÉ ti·∫øp t·ª•c</div>
            <div class="auth-subtitle">Truy c·∫≠p b·∫£ng ƒëi·ªÅu khi·ªÉn ƒë·ªãnh gi√° v√† d·ª± b√°o th·ªã tr∆∞·ªùng</div>
            <form id="loginForm" novalidate>
                <div class="auth-row">
                    <label class="form-label" for="email">Email</label>
                    <div class="input-wrap">
                        <i class="fas fa-envelope"></i>
                        <input id="email" type="email" class="input" placeholder="V√≠ d·ª•: demo@basao.ai" autocomplete="username" required />
                    </div>
                    <small id="emailErr" class="error-text">Email kh√¥ng h·ª£p l·ªá.</small>
                </div>
                <div class="auth-row">
                    <label class="form-label" for="password">M·∫≠t kh·∫©u</label>
                    <div class="input-wrap">
                        <i class="fas fa-lock"></i>
                        <input id="password" type="password" class="input" placeholder="√çt nh·∫•t 6 k√Ω t·ª±" autocomplete="current-password" required />
                        <i id="togglePass" class="fas fa-eye toggle-pass" aria-label="Hi·ªán/·∫©n m·∫≠t kh·∫©u" title="Hi·ªán/·∫©n m·∫≠t kh·∫©u"></i>
                    </div>
                    <small id="passErr" class="error-text">M·∫≠t kh·∫©u c·∫ßn √≠t nh·∫•t 6 k√Ω t·ª±.</small>
                </div>
                <div class="auth-actions">
                    <label style="display:flex; align-items:center; gap:8px; cursor:pointer;">
                        <input type="checkbox" id="remember" /> Ghi nh·ªõ t√¥i
                    </label>
                    <div class="auth-links">
                        <button type="button" class="btn btn-ghost" id="btnRegister" title="T·∫°o t√†i kho·∫£n"><i class="fas fa-user-plus"></i> T·∫°o t√†i kho·∫£n</button>
                        <button type="button" class="btn btn-ghost" id="btnForgot" title="Qu√™n m·∫≠t kh·∫©u (mock)"><i class="fas fa-key"></i> Qu√™n m·∫≠t kh·∫©u</button>
                    </div>
                </div>
                <div class="auth-foot">
                    <button type="submit" class="btn btn-primary" style="width:100%"><i class="fas fa-right-to-bracket"></i> ƒêƒÉng nh·∫≠p</button>
                    <div class="divider">ho·∫∑c</div>
                    <button type="button" class="btn btn-outline" style="width:100%"><i class="fab fa-google"></i> ƒêƒÉng nh·∫≠p v·ªõi Google</button>
                    <div class="auth-note">G·ª£i √Ω th·ª≠ nhanh: <b>demo@basao.ai</b> / <b>123456</b></div>
                </div>
            </form>
        </div>
    </div>

    <!-- ===== App ===== -->
    <div class="container" id="app" style="display:none">
        <!-- Header -->
        <div class="header">
            <div class="logo"><i class="fas fa-robot"></i><span>RentAI </span></div>
            <div class="user-info">
                <div class="user-avatar" id="avatarInitials">HDT</div>
                <button id="btnLogout" class="btn btn-outline" title="ƒêƒÉng xu·∫•t"><i class="fas fa-arrow-right-from-bracket"></i></button>
            </div>
        </div>

        <div class="dashboard">
            <!-- Main Content -->
            <div class="main-content">
                <!-- Input Form -->
                <div class="card">
                    <div class="card-header"><div class="card-title">üè† ƒê·ªãnh Gi√° Ph√≤ng Tr·ªç Th√¥ng Minh</div></div>
                    <div class="card-subtitle">AI c·ªßa ch√∫ng t√¥i s·∫Ω ph√¢n t√≠ch v√† d·ª± ƒëo√°n gi√° thu√™ t·ªëi ∆∞u nh·∫•t</div>

                    <div class="form-group">
                        <label class="form-label">üìç ƒê·ªãa ch·ªâ nh√†</label>
                        <input type="text" class="form-input" placeholder="Nh·∫≠p ƒë·ªãa ch·ªâ..." />
                    </div>

                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div class="form-group">
                            <label class="form-label">üìê Di·ªán t√≠ch (m¬≤)</label>
                            <input type="number" class="form-input" placeholder="V√≠ d·ª•: 65" />
                        </div>
                        <div class="form-group">
                            <label class="form-label">üõè S·ªë ph√≤ng ng·ªß</label>
                            <select class="form-input">
                                <option>1 ph√≤ng</option>
                                <option>2 ph√≤ng</option>
                                <option>3 ph√≤ng</option>
                                <option>4+ ph√≤ng</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">üöø Ti·ªán nghi & Ti·ªán √≠ch</label>
                        <div class="amenities-grid">
                            <div class="amenity-item"><input type="checkbox" id="wifi" /><label for="wifi">Wifi mi·ªÖn ph√≠ / t·ªëc ƒë·ªô cao</label></div>
                            <div class="amenity-item"><input type="checkbox" id="aircon" /><label for="aircon">M√°y l·∫°nh</label></div>
                            <div class="amenity-item"><input type="checkbox" id="washing" /><label for="washing">M√°y gi·∫∑t d√πng chung</label></div>
                            <div class="amenity-item"><input type="checkbox" id="kitchen" /><label for="kitchen">Khu b·∫øp n·∫•u ƒÉn</label></div>
                            <div class="amenity-item"><input type="checkbox" id="fridge" /><label for="fridge">T·ªß l·∫°nh</label></div>
                            <div class="amenity-item"><input type="checkbox" id="toilet_private" /><label for="toilet_private">Nh√† v·ªá sinh ri√™ng</label></div>
                            <div class="amenity-item"><input type="checkbox" id="desk" /><label for="desk">B√†n h·ªçc</label></div>
                            <div class="amenity-item"><input type="checkbox" id="bed" /><label for="bed">Gi∆∞·ªùng / N·ªám</label></div>
                            <div class="amenity-item"><input type="checkbox" id="closet" /><label for="closet">T·ªß qu·∫ßn √°o</label></div>
                            <div class="amenity-item"><input type="checkbox" id="parking" /><label for="parking">Ch·ªó ƒë·ªÉ xe m√°y</label></div>
                            <div class="amenity-item"><input type="checkbox" id="security" /><label for="security">B·∫£o v·ªá / camera an ninh</label></div>
                            <div class="amenity-item"><input type="checkbox" id="balcony" /><label for="balcony">Ban c√¥ng ph∆°i ƒë·ªì</label></div>
                            <div class="amenity-item"><input type="checkbox" id="roommate" /><label for="roommate">Cho ·ªü gh√©p</label></div>
                            <div class="amenity-item"><input type="checkbox" id="near_university" /><label for="near_university">G·∫ßn tr∆∞·ªùng ƒë·∫°i h·ªçc</label></div>
                            <div class="amenity-item"><input type="checkbox" id="near_food" /><label for="near_food">G·∫ßn qu√°n ƒÉn / ch·ª£</label></div>
                            <div class="amenity-item"><input type="checkbox" id="near_bus" /><label for="near_bus">G·∫ßn tr·∫°m xe bu√Ωt</label></div>
                            <div class="amenity-item"><input type="checkbox" id="affordable" /><label for="affordable">ƒêi·ªán n∆∞·ªõc gi√° d√¢n</label></div>
                            <div class="amenity-item"><input type="checkbox" id="study_area" /><label for="study_area">Kh√¥ng gian y√™n tƒ©nh ƒë·ªÉ h·ªçc t·∫≠p</label></div>
                        </div>
                    </div>


                    <button class="btn btn-primary" style="width:100%; margin-top:20px;" onclick="showResults()"><i class="fas fa-bolt"></i> ƒê·ªãnh Gi√° Ngay</button>
                </div>

                <!-- AI Chat Section -->
                <div class="card ai-chat-section">
                    <div class="ai-chat-header">
                        <i class="fas fa-robot" style="color: var(--primary); font-size: 24px;"></i>
                        <div class="ai-chat-title">Tr√≤ chuy·ªán v·ªõi AI</div>
                    </div>
                    <div class="ai-chat-subtitle">H·ªèi AI v·ªÅ gi√° thu√™, ph√¢n t√≠ch th·ªã tr∆∞·ªùng ho·∫∑c b·∫•t k·ª≥ th·∫Øc m·∫Øc n√†o</div>
                    
                    <div class="chat-container">
                        <div class="chat-messages" id="chatMessages">
                            <div class="message ai">
                                <strong>RentAI:</strong> Xin ch√†o! T√¥i c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n v·ªÅ ƒë·ªãnh gi√° nh√† h√¥m nay?
                            </div>
                        </div>
                        <div class="chat-input-container">
                            <textarea class="chat-input" id="promptInput" placeholder="Nh·∫≠p c√¢u h·ªèi c·ªßa b·∫°n... (v√≠ d·ª•: g·ª£i √Ω gi√° thu√™ cho sinh vi√™n g·∫ßn NEU)"></textarea>
                            <button class="chat-send-btn" id="sendPrompt">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="suggestion-tags">
                        <div class="suggestion-tag" data-prompt="G·ª£i √Ω gi√° thu√™ cho sinh vi√™n g·∫ßn NEU">G·ª£i √Ω gi√° thu√™ cho sinh vi√™n g·∫ßn NEU</div>
                        <div class="suggestion-tag" data-prompt="Ph√¢n t√≠ch xu h∆∞·ªõng th·ªã tr∆∞·ªùng H√† ƒê√¥ng">Ph√¢n t√≠ch xu h∆∞·ªõng th·ªã tr∆∞·ªùng H√† ƒê√¥ng</div>
                        <div class="suggestion-tag" data-prompt="So s√°nh gi√° thu√™ gi·ªØa c√°c khu v·ª±c">So s√°nh gi√° thu√™ gi·ªØa c√°c khu v·ª±c</div>
                        <div class="suggestion-tag" data-prompt="C√°c ti·ªán √≠ch ·∫£nh h∆∞·ªüng gi√° thu√™">C√°c ti·ªán √≠ch ·∫£nh h∆∞·ªüng gi√° thu√™</div>
                    </div>
                </div>

                <!-- Results Section -->
                <div class="results-section" id="resultsSection">
                    <div class="price-result">
                        <div>üí∞ GI√Å ƒê·ªÄ XU·∫§T</div>
                        <div class="price-value">8.500.000‚Ç´</div>
                        <div class="confidence-badge">ƒê·ªô tin c·∫≠y: 92%</div>
                        <div class="price-range">Ph·∫°m vi: 7.800.000‚Ç´ - 9.200.000‚Ç´/th√°ng</div>
                    </div>

                </div>
            </div>

            <!-- Sidebar -->
            <div class="sidebar">
                <div class="card prediction-card">
                    <div class="card-header"><div class="card-title">üîÆ D·ª± ƒêo√°n Th·ªã Tr∆∞·ªùng</div></div>
                    <div class="prediction-trend"><div class="trend-icon">üìà</div><div><div class="trend-up">H√† ƒê√¥ng s·∫Ω tƒÉng 5-8%</div><div class="card-subtitle">Trong 6 th√°ng t·ªõi</div></div></div>
                    <div style="font-size:14px; margin-bottom:15px;">"Metro s·∫Øp ho√†n th√†nh - ƒê·∫ßu t∆∞ ngay!"</div>
                    <button class="btn btn-outline" style="width:100%;"><i class="fas fa-chart-line"></i> Xem Ph√¢n T√≠ch</button>
                </div>

                <div class="card">
                    <div class="card-header"><div class="card-title">üë• C·ªông ƒê·ªìng</div></div>
                    <div class="community-stats">
                        <div class="stat-item"><div class="stat-value">25</div><div class="stat-label">ƒêang online</div></div>
                        <div class="stat-item"><div class="stat-value">142</div><div class="stat-label">Chuy√™n gia</div></div>
                        <div class="stat-item"><div class="stat-value">89%</div><div class="stat-label">Ch√≠nh x√°c</div></div>
                    </div>
                    <div style="font-size:14px; margin-bottom:15px;">"15 ng∆∞·ªùi v·ª´a ƒë·ªãnh gi√° khu v·ª±c c·ªßa b·∫°n"</div>
                    <button class="btn btn-outline" style="width:100%;"><i class="fas fa-users"></i> Tham Gia</button>
                </div>

                <div class="card">
                    <div class="card-header"><div class="card-title">ü§ñ Tr·ª£ L√Ω AI</div></div>
                    <div style="font-size:14px; margin-bottom:15px;">"T√¥i th·∫•y b·∫°n c√≥ 2 BƒêS ·ªü H√† ƒê√¥ng. C·∫ßn t∆∞ v·∫•n g√¨ h√¥m nay?"</div>
                    <div style="display:grid; grid-template-columns: 1fr; gap: 10px;">
                        <button class="btn btn-outline"><i class="fas fa-chart-pie"></i> Ph√¢n T√≠ch ƒê·∫ßu T∆∞</button>
                        <button class="btn btn-outline"><i class="fas fa-search"></i> So S√°nh Th·ªã Tr∆∞·ªùng</button>
                        <button class="btn btn-outline"><i class="fas fa-calendar"></i> ƒê·∫∑t L·ªãch T∆∞ V·∫•n</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- FAB -->
    <div class="ai-assistant"><i class="fas fa-robot"></i></div>

    <script>
        // ===== Auth Helpers =====
        const authScreen = document.getElementById('authScreen');
        const registerScreen = document.getElementById('registerScreen');
        const app = document.getElementById('app');
        const loginForm = document.getElementById('loginForm');
        const emailInput = document.getElementById('email');
        const passInput = document.getElementById('password');
        const emailErr = document.getElementById('emailErr');
        const passErr = document.getElementById('passErr');
        const togglePass = document.getElementById('togglePass');
        const remember = document.getElementById('remember');
        const avatarInitials = document.getElementById('avatarInitials');
        const btnLogout = document.getElementById('btnLogout');

        // ===== Register Variables =====
        const registerForm = document.getElementById('registerForm');
        const step2Form = document.getElementById('step2Form');
        const step3Form = document.getElementById('step3Form');
        const successStep = document.getElementById('successStep');
        const steps = [registerForm, step2Form, step3Form, successStep];
        const stepIndicators = [document.getElementById('step1'), document.getElementById('step2'), document.getElementById('step3')];
        
        let currentStep = 0;
        let userType = '';
        let formData = {};

        // ===== Phone validation (Step 1) =====
        const phoneInput = document.getElementById('phone');
        const phoneErr   = document.getElementById('phoneErr');

        if (phoneInput) {
          phoneInput.addEventListener('input', function () {
            this.value = this.value.replace(/\D/g, '').slice(0, 10);
            if (/^\d{10}$/.test(this.value)) phoneErr.style.display = 'none';
          });
        }

        // ===== AI Chat Functionality =====
        const chatMessages = document.getElementById('chatMessages');
        const promptInput = document.getElementById('promptInput');
        const sendPrompt = document.getElementById('sendPrompt');
        const suggestionTags = document.querySelectorAll('.suggestion-tag');

        // Auto-resize textarea
        promptInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = (this.scrollHeight) + 'px';
        });

        // Send message function
        function sendMessage() {
            const message = promptInput.value.trim();
            if (!message) return;

            // Add user message
            addMessage(message, 'user');
            promptInput.value = '';
            promptInput.style.height = 'auto';
            
            // Disable send button while processing
            sendPrompt.disabled = true;
            
            // Simulate AI response after a short delay
            setTimeout(() => {
                const aiResponse = generateAIResponse(message);
                addMessage(aiResponse, 'ai');
                sendPrompt.disabled = false;
            }, 1000);
        }

        // Add message to chat
        function addMessage(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            if (sender === 'user') {
                messageDiv.innerHTML = `<strong>B·∫°n:</strong> ${text}`;
            } else {
                messageDiv.innerHTML = `<strong>RentAI:</strong> ${text}`;
            }
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Generate AI response based on user input
        function generateAIResponse(userMessage) {
            const lowerMessage = userMessage.toLowerCase();
            
            if (lowerMessage.includes('gi√° thu√™') && lowerMessage.includes('sinh vi√™n')) {
                return "D·ª±a tr√™n ph√¢n t√≠ch th·ªã tr∆∞·ªùng, gi√° thu√™ ph√≤ng cho sinh vi√™n g·∫ßn NEU dao ƒë·ªông t·ª´ 2.5 - 4.5 tri·ªáu/th√°ng t√πy theo di·ªán t√≠ch v√† ti·ªán nghi. Ph√≤ng c√≥ m√°y l·∫°nh, wifi, ch·ªó ƒë·ªÉ xe v√† g·∫ßn tr∆∞·ªùng s·∫Ω c√≥ gi√° cao h∆°n.";
            } else if (lowerMessage.includes('xu h∆∞·ªõng') || lowerMessage.includes('th·ªã tr∆∞·ªùng')) {
                return "Th·ªã tr∆∞·ªùng cho thu√™ H√† N·ªôi ƒëang c√≥ xu h∆∞·ªõng tƒÉng nh·∫π 3-5% trong 6 th√°ng t·ªõi, ƒë·∫∑c bi·ªát t·∫°i c√°c khu v·ª±c g·∫ßn tr∆∞·ªùng ƒë·∫°i h·ªçc v√† tuy·∫øn metro s·∫Øp ho√†n th√†nh.";
            } else if (lowerMessage.includes('so s√°nh') || lowerMessage.includes('khu v·ª±c')) {
                return "Theo d·ªØ li·ªáu m·ªõi nh·∫•t: C·∫ßu Gi·∫•y (5-8 tr), H√† ƒê√¥ng (4-7 tr), Thanh Xu√¢n (4.5-7.5 tr). Gi√° ph·ª• thu·ªôc v√†o v·ªã tr√≠, di·ªán t√≠ch v√† ti·ªán nghi.";
            } else if (lowerMessage.includes('ti·ªán √≠ch') || lowerMessage.includes('·∫£nh h∆∞·ªüng')) {
                return "C√°c ti·ªán √≠ch ·∫£nh h∆∞·ªüng nhi·ªÅu nh·∫•t ƒë·∫øn gi√° thu√™: m√°y l·∫°nh (+15%), wifi t·ªëc ƒë·ªô cao (+10%), ch·ªó ƒë·ªÉ xe (+8%), g·∫ßn tr∆∞·ªùng/ch·ª£/tr·∫°m xe bu√Ωt (+5-12%).";
            } else {
                return "C·∫£m ∆°n c√¢u h·ªèi c·ªßa b·∫°n! T√¥i c√≥ th·ªÉ gi√∫p ph√¢n t√≠ch gi√° thu√™, xu h∆∞·ªõng th·ªã tr∆∞·ªùng, so s√°nh khu v·ª±c ho·∫∑c t∆∞ v·∫•n v·ªÅ c√°c y·∫øu t·ªë ·∫£nh h∆∞·ªüng gi√°. B·∫°n mu·ªën t√¨m hi·ªÉu v·ªÅ ƒëi·ªÅu g√¨ c·ª• th·ªÉ?";
            }
        }

        // Event listeners for AI chat
        sendPrompt.addEventListener('click', sendMessage);
        
        promptInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        // Suggestion tags
        suggestionTags.forEach(tag => {
            tag.addEventListener('click', function() {
                promptInput.value = this.getAttribute('data-prompt');
                promptInput.focus();
            });
        });

        function setInitialsFromEmail(email) {
            const name = (email || '').split('@')[0] || 'HDT';
            const parts = name.replace(/[^a-zA-Z0-9]/g,' ').trim().split(' ').filter(Boolean);
            const initials = parts.length >= 2 ? (parts[0][0] + parts[1][0]) : name.slice(0,2);
            avatarInitials.textContent = initials.toUpperCase();
        }

        function showApp() {
            authScreen.style.display = 'none';
            registerScreen.style.display = 'none';
            app.style.display = 'block';
            document.body.style.overflow = 'auto';
        }

        function showLogin() {
            authScreen.style.display = 'grid';
            registerScreen.style.display = 'none';
            app.style.display = 'none';
            document.body.style.overflow = 'hidden';
        }

        function showRegister() {
            authScreen.style.display = 'none';
            registerScreen.style.display = 'grid';
            app.style.display = 'none';
            document.body.style.overflow = 'hidden';
            resetRegisterForm();
        }

        function resetRegisterForm() {
            currentStep = 0;
            userType = '';
            formData = {};
            updateStepDisplay();
            registerForm.reset();
            document.querySelectorAll('.user-type-card').forEach(card => {
                card.classList.remove('selected');
            });
            document.getElementById('acceptTerms').checked = false;
        }

        function updateStepDisplay() {
            steps.forEach((step, index) => {
                step.classList.toggle('active', index === currentStep);
            });
            
            stepIndicators.forEach((indicator, index) => {
                indicator.classList.remove('active', 'completed');
                if (index < currentStep) {
                    indicator.classList.add('completed');
                } else if (index === currentStep) {
                    indicator.classList.add('active');
                }
            });
        }

        function validateEmail(v){ return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v); }

        // ===== Register Step Navigation =====
        document.getElementById('nextToStep2').addEventListener('click', () => {
            const fullName = document.getElementById('fullName').value.trim();
            const email = document.getElementById('regEmail').value.trim();
            const password = document.getElementById('regPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;

            let valid = true;

            // Phone required & 10 digits
            const phoneVal = phoneInput.value.trim();
            if (!/^\d{10}$/.test(phoneVal)) {
                phoneErr.style.display = 'block';
                valid = false;
            } else {
                phoneErr.style.display = 'none';
            }

            if (!fullName) {
                document.getElementById('nameErr').style.display = 'block';
                valid = false;
            } else {
                document.getElementById('nameErr').style.display = 'none';
            }

            if (!validateEmail(email)) {
                document.getElementById('regEmailErr').style.display = 'block';
                valid = false;
            } else {
                document.getElementById('regEmailErr').style.display = 'none';
            }

            if (password.length < 6) {
                document.getElementById('regPassErr').style.display = 'block';
                valid = false;
            } else {
                document.getElementById('regPassErr').style.display = 'none';
            }

            if (password !== confirmPassword) {
                document.getElementById('confirmPassErr').style.display = 'block';
                valid = false;
            } else {
                document.getElementById('confirmPassErr').style.display = 'none';
            }

            if (valid) {
                formData = { ...formData, fullName, phone: phoneVal, email, password };
                currentStep = 1;
                updateStepDisplay();
            }
        });

        document.getElementById('nextToStep3').addEventListener('click', () => {
            if (!userType) {
                document.getElementById('typeErr').style.display = 'block';
                return;
            }
            document.getElementById('typeErr').style.display = 'none';
            formData.userType = userType;
            currentStep = 2;
            updateStepDisplay();
        });

        document.getElementById('submitRegister').addEventListener('click', () => {
            if (!document.getElementById('acceptTerms').checked) {
                document.getElementById('termsErr').style.display = 'block';
                return;
            }
            document.getElementById('termsErr').style.display = 'none';

            // phone ƒë√£ c√≥ t·ª´ Step 1 (ƒë√£ validate)
            formData.referral = document.getElementById('referral').value;

            // Simulate registration success
            console.log('Registration data:', formData);
            
            currentStep = 3;
            updateStepDisplay();
        });

        // Back buttons
        document.getElementById('backToStep1').addEventListener('click', () => {
            currentStep = 0;
            updateStepDisplay();
        });

        document.getElementById('backToStep2').addEventListener('click', () => {
            currentStep = 1;
            updateStepDisplay();
        });

        document.getElementById('backToLogin').addEventListener('click', showLogin);
        document.getElementById('goToLogin').addEventListener('click', showLogin);

        // User type selection
        document.querySelectorAll('.user-type-card').forEach(card => {
            card.addEventListener('click', () => {
                document.querySelectorAll('.user-type-card').forEach(c => {
                    c.classList.remove('selected');
                });
                card.classList.add('selected');
                userType = card.dataset.type;
            });
        });

        // Password toggle for register
        document.getElementById('toggleRegPass').addEventListener('click', () => {
            const passField = document.getElementById('regPassword');
            const type = passField.getAttribute('type') === 'password' ? 'text' : 'password';
            passField.setAttribute('type', type);
            document.getElementById('toggleRegPass').classList.toggle('fa-eye');
            document.getElementById('toggleRegPass').classList.toggle('fa-eye-slash');
        });

        // Auto sign-in if remembered
        (function initAuth() {
            const saved = localStorage.getItem('basao_authed');
            const savedEmail = localStorage.getItem('basao_email');
            if (saved === '1' && savedEmail) {
                setInitialsFromEmail(savedEmail);
                showApp();
            } else {
                showLogin();
            }
        })();

        togglePass.addEventListener('click', () => {
            const type = passInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passInput.setAttribute('type', type);
            togglePass.classList.toggle('fa-eye');
            togglePass.classList.toggle('fa-eye-slash');
        });

        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const email = emailInput.value.trim();
            const pass = passInput.value;

            let ok = true;
            if(!validateEmail(email)) { emailErr.style.display='block'; ok=false; } else { emailErr.style.display='none'; }
            if(!pass || pass.length < 6) { passErr.style.display='block'; ok=false; } else { passErr.style.display='none'; }
            if(!ok) return;

            // Demo check (mock). In th·ª±c t·∫ø: g·ªçi API ƒëƒÉng nh·∫≠p.
            if ((email.toLowerCase() === 'demo@basao.ai' && pass === '123456') || pass.length >= 6) {
                if (remember.checked) {
                    localStorage.setItem('basao_authed','1');
                    localStorage.setItem('basao_email', email);
                } else {
                    localStorage.removeItem('basao_authed');
                    localStorage.removeItem('basao_email');
                }
                setInitialsFromEmail(email);
                showApp();
            } else {
                passErr.textContent = 'Th√¥ng tin ƒëƒÉng nh·∫≠p ch∆∞a ƒë√∫ng.';
                passErr.style.display = 'block';
            }
        });

        btnLogout.addEventListener('click', () => {
            localStorage.removeItem('basao_authed');
            localStorage.removeItem('basao_email');
            emailInput.value = '';
            passInput.value = '';
            showLogin();
        });

        // Register button in login screen
        document.getElementById('btnRegister').addEventListener('click', showRegister);

        // ===== App Interactions =====
        function showResults() {
            document.getElementById('resultsSection').style.display = 'block';
            window.scrollTo({ top: document.getElementById('resultsSection').offsetTop - 20, behavior: 'smooth' });
        }
        window.showResults = showResults;

        document.querySelectorAll('.mode-card').forEach(card => {
            card.addEventListener('click', function() {
                document.querySelectorAll('.mode-card').forEach(c => c.classList.remove('active'));
                this.classList.add('active');
            });
        });

        document.querySelector('.ai-assistant').addEventListener('click', function() {
            alert('Xin ch√†o! T√¥i l√† tr·ª£ l√Ω AI c·ªßa b·∫°n. T√¥i c√≥ th·ªÉ gi√∫p g√¨ cho vi·ªác ƒë·ªãnh gi√° nh√† h√¥m nay?');
        });

        document.querySelector('.btn-accent').addEventListener('click', function() {
            alert('üéÆ B·∫Øt ƒë·∫ßu th·ª≠ th√°ch! B·∫°n c√≥ 10 gi√¢y ƒë·ªÉ ƒëo√°n gi√° cƒÉn h·ªô n√†y.');
        });

        // Demo handlers
        document.getElementById('btnForgot').addEventListener('click', () => alert('Vui l√≤ng li√™n h·ªá admin ƒë·ªÉ ƒë·∫∑t l·∫°i m·∫≠t kh·∫©u. (mock)'));
    </script>
</body>
</html>